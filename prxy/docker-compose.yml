version: '3.3'
services:
  traefik:
    image: traefik
    networks:
    - wappsfrontend
    ports:
    - ${TRAEFIK_IP}:80:80
    - ${TRAEFIK_IP}:443:443
    - ${TRAEFIK_IP}:4443:4443
    volumes:
    - /var/run/docker.sock:/var/run/docker.sock
    - ./traefik.toml:/traefik.toml
    - ./traefik:/traefik
    - ${TRAEFIK_PEM}:/tls.pem
    - ${TRAEFIK_KEY}:/tls.key
    labels:
    - traefik.enable=true
    - traefik.frontend.rule=Host:${TRAEFIK_HOST}
    - traefik.frontend.entryPoints=https-mgmt
    - traefik.port=8080
    restart: always
networks:
  wappsfrontend:
    external: true
